local AisBoost = {}

local request = request or http and http.request or http_request or (fluxus and fluxus.request)
local function GetUserIp()
  local success, res = pcall(function()
    local response = request({
      Url = "https://api.ipify.org/",
      Method = "GET"
    })

    return response.Body
  end)

  return res
end

local Hwid = crypt.base64.encode(GetUserIp())

function AisBoost:GetLink(ApplicationId)
  return string.format("https://gw.aisboost.com/a/%i?hwid=%s", ApplicationId, Hwid)
end

function AisBoost:Verify(ApplicationId, Key)
  local status, response = pcall(function()
    return game:HttpGet(string.format("https://api.aisboost.com/v1/authenticators/%i/redeem?hwid=%s&key=%s", ApplicationId, Hwid, Key))
  end)

  if status then 
    return string.find(response, "true")
  end

  return false
end

return AisBoost
